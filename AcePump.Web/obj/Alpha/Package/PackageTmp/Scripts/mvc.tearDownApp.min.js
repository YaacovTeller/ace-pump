!function(){"use strict";angular.module("acePump.core",["kendo.directives"]),angular.module("acePump.core").value("kendo",kendo)}(),function(){"use strict";function a(a){a.errorOnUnhandledRejections(!1)}angular.module("acePump.core").config(a),a.$inject=["$qProvider"]}(),function(){"use strict";angular.module("acePump.core").filter("percent",["$filter",function(a){var b=a("number");return function(a){return b(100*a)+"%"}}])}(),function(){"use strict";function a(a){function b(a){a.ok=function(){a._closeDialog(),a._broadcastModalSpecificEvent("ok")},a.cancel=function(){a._closeDialog(),a._broadcastModalSpecificEvent("cancel")},a._closeDialog=function(){a.visible=!1},a._broadcastModalSpecificEvent=function(b){var c="modalService."+b+"."+a.modalId;a.$emit(c)},a.visible=!1}function c(b,c,d,e,f){function g(){var b=c.find(".s-modal-container"),d=angular.element(a).height(),e=b.height(),f=(d-e)/2;b.css("margin-top",f)}c.find(".s-modal-content").append(f());var h="modalService.open."+b.modalId;b.$on(h,function(a,c){b.visible=!0,g()}),angular.element(a).on("resize",g),g()}var d={restrict:"E",scope:{title:"@",okText:"@",cancelText:"@",modalId:"@"},template:'<div class="s-modal-backdrop" ng-show="visible"><div class="s-modal-container" ng-show="visible"><div class="s-modal-title-bar">{{title}}</div><div class="s-modal-content"></div><div class="s-modal-buttons"><button ng-click="ok()" type="button">{{okText}}</button><button ng-click="cancel()" type="button">{{cancelText}}</button></div></div></div>',transclude:!0,link:c,controller:b};return b.$inject=["$scope"],c.$inject=["$scope","elem","attrs","controller","$transclude"],d}angular.module("acePump.core").directive("modalDialog",a),a.$inject=["$window"]}(),function(){"use strict";function a(){function a(a,b,c){var d=48;b.on("keyup",function(a){if(!(a.which<d)){var e=b.val().length,f=parseInt(c.maxlength);if(e===f){var g=$("input[type=text]"),h=g.index(a.target),i=h+1,j=$("input[type=text]:nth("+i+")");j.focus()}}})}var b={restrict:"A",link:a};return a.$inject=["$scope","elem","attrs"],b}angular.module("acePump.core").directive("autoAdvance",a)}(),function(){"use strict";function a(){function a(a,b,d,e){b.on("change",function(a){for(var f=d.maxlength,g=b.val();g.length<f;)g+=c;e.$setViewValue(g),e.$render()})}var b={restrict:"A",link:a,require:"ngModel"},c=" ";return b}angular.module("acePump.core").directive("padInput",a),a.$inject=[]}(),function(){"use strict";function a(){function a(a,b,c){b.on("focus",function(a){a.target.select()})}var b={restrict:"A",link:a};return b}angular.module("acePump.core").directive("selectOnClick",a),a.$inject=[]}(),function(){"use strict";function a(a){function b(b,c,d){"static"===c.css("position")&&c.css("position","relative"),b.$watch(d.acePumpLoading,function(b){a.ui.progress(c,b)})}var c={link:b,restrict:"A"};return c}angular.module("acePump.core").directive("acePumpLoading",a),a.$inject=["kendo"]}(),function(){"use strict";angular.module("acePump.core").service("modalService",["$rootScope","$q",function(a,b){function c(a){this.id=a,this.init()}function d(a){return a in f||(f[a]=new c(a)),f[a]}var e={OPEN:"MODAL_DIALOG_STATE_OPEN",CLOSED:"MODAL_DIALOG_STATE_CLOSED"};c.prototype.init=function(){this._initDeferred();var a=this;this._listenForModalSpecificEvent("ok",function(){a.ok()}),this._listenForModalSpecificEvent("cancel",function(){a.cancel()}),this.state=e.CLOSED},c.prototype._initDeferred=function(){function a(c,d){var e=b.defer();e.promise["finally"](function(){a(c,d)}),c[d]=e}a(this,"_deferred")},c.prototype.then=function(a,b){this._deferred.promise.then(a,b)},c.prototype.open=function(a){this.state!==e.OPEN&&(this.state=e.OPEN,this._broadcastModalSpecificEvent("open",a))},c.prototype.close=function(){this.state=e.CLOSED,this._deferred.reject("closed"),this._broadcastModalSpecificEvent("close")},c.prototype.ok=function(){this.state=e.CLOSED,this._deferred.resolve("ok")},c.prototype.cancel=function(){this.state=e.CLOSED,this._deferred.resolve("cancel")},c.prototype._broadcastModalSpecificEvent=function(b,c){var d=this._getModalSpecificEventName(b);"undefined"==typeof c?a.$broadcast(d):a.$broadcast(d,c)},c.prototype._listenForModalSpecificEvent=function(b,c){var d=this._getModalSpecificEventName(b);a.$on(d,c)},c.prototype._getModalSpecificEventName=function(a){return"modalService."+a+"."+this.id};var f={};return{getModal:function(a){return d(a)}}}])}(),function(){"use strict";function a(){function a(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=a[c].join(""));return b}function b(a,b,c){var d,e,f;return void 0!==b&&""!==b&&30===b.length&&(d=b.length,a=b+a.substring(d,a.length)),void 0!==c&&""!==c&&72===c.length&&(e=90,d=e+c.length,f=a.substring(0,e),a=f+c+a.substring(d,a.length)),a}function c(a,c,e){a=b(a,c,e);var f=new d(a),g={},h=0;for(g.PlungerOrig=[],h=0;h<15;h++)g.PlungerOrig[h]=f.next().value;for(g.PlungerWearRepaired=[],h=0;h<15;h++)g.PlungerWearRepaired[h]=f.next().value;for(g.PlungerOut=[],h=0;h<15;h++)g.PlungerOut[h]=f.next().value;for(g.BarrelOrig=[],h=0;h<36;h++)g.BarrelOrig[h]=f.next().value;for(g.BarrelWearRepaired=[],h=0;h<36;h++)g.BarrelWearRepaired[h]=f.next().value;for(g.BarrelOut=[],h=0;h<36;h++)g.BarrelOut[h]=f.next().value;return g}function d(a){var b=0;return{next:function(){if(b<a.length){var c={value:a.substring(b,b+2)};return b+=2,c}return null}}}var e={serialize:a,deserialize:c,makeDeserializeIterator:d};return e}angular.module("acePump.core").service("plungerBarrelWearSerializationService",a)}(),function(){"use strict";function a(a,b){function c(b,c,d){return a({method:"POST",url:b,responseType:"json",data:{id:c,customerID:d}}).then(function(a){return a.data.Available})}function d(c,d){return a({method:"POST",responseType:"json",url:c,data:{model:d,useInventory:!d.ReplacedWithInventoryPartID}}).then(function(a){return a.data.Success?{replacedWithInventoryPartID:a.data.ReplacedWithInventoryPartID,availableInInventory:a.data.AvailableInInventory}:b.reject(a.data.Errors)})}function e(c,d,e){return b.when().then(function(){for(var b=[],f=0;f<e.length;f++)"Replace"!==e[f].Result&&"Convert"!==e[f].Result||(b[f]=e[f].PartReplacedID);return b.length>0?a({method:"POST",responseType:"json",url:c,data:{partTemplateIDs:b,customerId:d}}).then(function(a){return a.data}):[]})}function f(c,d,e,f){return b.when().then(function(){return a({method:"POST",responseType:"json",url:c,data:{pumpID:d,customerID:e,currentTicketDate:f}}).then(function(a){return a})})["catch"](function(a){return[]})}var g={checkAvailability:c,usePartFromInventory:d,checkAvailabilityForInspections:e,loadOriginalPartsCustomerOwned:f};return g}angular.module("acePump.core").service("inventoryService",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b){function c(c){return b.confirm(c)?a.resolve():a.reject()}var d={confirm:c};return d}angular.module("acePump.core").service("util",a),a.$inject=["$q","$window"]}(),function(){"use strict";angular.module("acePump.backOffice",["acePump.core"])}(),function(){"use strict";angular.module("acePump",["acePump.backOffice"])}(),function(){"use strict";function a(a,b,c,d,e){function f(a){n.serverValues=a,g(),n.serverValues.reasonRepairedListUrl&&h()}function g(){return b({method:"POST",responseType:"json",url:n.serverValues.readUrl}).then(function(a){n.tearDownItems=a.data.Data;for(var b=0;b<n.tearDownItems.length;b++){var c=n.tearDownItems[b];(1!==c.Quantity||c.CanBeRepresentedAsAssembly||c.HasParentAssembly)&&(c.onlyTrash=!0)}}).then(function(){l()})}function h(){return b({method:"POST",responseType:"json",url:n.serverValues.reasonRepairedListUrl}).then(function(a){n.reasonsRepaired=a.data})}function i(a,b){if(1===a.Quantity){if("Trashed"===b)a.Result=b;else{if("Inventory"!==b)throw new Error("Unknown result: "+b);a.Result=b,a.ReasonRepaired=""}n.saveTearDownItem(a)}}function j(a){return b({method:"POST",responseType:"json",url:n.serverValues.updateUrl,data:a}).then(function(a){l()})}function k(){return d.confirm("CAUTION: Switching back to regular repair will delete all inspections for this tear down. Are you sure you want to continue?").then(function(){return b({method:"POST",responseType:"json",url:n.serverValues.switchRepairModeUrl,data:{id:n.serverValues.deliveryTicketID}}).then(function(b){return b.data.Success?void e.location.assign(b.data.RedirectUrl):a.reject(b.data.Errors)})})["catch"](function(a){e.alert(a)})}function l(){return n.allMarked=!n.tearDownItems.some(function(a){return!a.Result}),n.allMarked}function m(){return b({method:"POST",responseType:"json",url:n.serverValues.completeTearDownUrl,data:{id:n.serverValues.deliveryTicketID}}).then(function(b){return b.data.Success?void e.location.assign(b.data.RedirectUrl):a.reject(b.data.Errors)})["catch"](function(a){e.alert(a)})}var n=this;n.tearDownItems=[],n.reasonsRepaired=[],n.init=f,n.setResult=i,n.saveTearDownItem=j,n.switchRepairMode=k,n.verifyAllMarked=l,n.completeTearDown=m}angular.module("acePump.backOffice").controller("TearDownController",a),a.$inject=["$q","$http","$timeout","util","$window"]}();