!function(){"use strict";angular.module("soris.ui.components",["kendo.directives"]).value("kendo",kendo).value("$",jQuery)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(b){j()&&b.wrapper.find(".k-i-"+q).addClass("k-si-minus").click(function(c){var d=a("[srs-desktop]").scope();d.ctrl.hideElement(b.element.closest(".k-window")),d.$digest(),c.preventDefault()})}function i(a){j()&&!a.modal&&(a.actions||(a.actions=["Close"]),a.actions.unshift(q))}function j(){return a("[srs-desktop]").length>0}function k(b){var c=a("<div>");c.append(a("<div>").addClass("container-fluid").append(a("<p>").text(b.message)).append(a("<form>").addClass("form-horizontal").attr("name","frm").attr("srs-use-bootstrap-validation-classes","true").attr("ng-submit","frm.$valid && window.complete()")));var d={},e=c.find("form");for(var f in b.fields)e.append(a("<div>").addClass("form-group").append(a("<label>").addClass("col-md-4 control-label").text(b.fields[f].label)).append(a("<div>").addClass("col-md-8").append(a("<input>").addClass("form-control").attr("type","text").attr("ng-model","fields."+f)))),d[f]=b.fields[f].value;e.append(a('<div class="form-group"><div class="col-md-offset-4 col-md-8"><button class="btn btn-primary"><span class="fa fa-check"></span> {{ ::localize.Lbl_OK }}</button> <button class="btn btn-default" type="button" ng-click="window.close()"><span class="fa fa-ban"></span> {{ ::localize.Lbl_Cancel }}</button></div></div>'));var g=r.open({modal:!0,scopeParams:{fields:d},template:c.html(),title:b.title});return g.whenCompleted().then(function(){return d})}function l(a){function b(b,c){var d={width:b.options.width,height:b.options.height,position:{top:b.options.position.top,left:b.options.position.left}};"up"===c?(d.height=g.innerHeight/2-a,d.position.top=e):(d.height=g.innerHeight/2-a,d.position.top=g.innerHeight/2+e),d.width?d.position.left=g.innerWidth/2-d.width/2+a/2:(d.width=g.innerWidth-a,d.position.left=e),b.setOptions(d),h(b)}if(3!==arguments.length)throw new Error("multiCenter only supports two windows");var c=arguments[1],d=arguments[2],e=a/2;b(c.kendoWindow,"up"),b(d.kendoWindow,"down")}function m(a){a=angular.extend({},a),a.title||(a.title="Message");var d=n(a);i(a);var g=s.create(a);return d.scope.window=new p(g,d.scope),f.when().then(function(){return a.template?a.template:e(d.url)}).then(function(a){g.content(a),d.cssClass&&g.element.closest(".k-window").addClass(d.cssClass),d.controller&&c(d.controller,{$scope:d.scope}),b(g.element)(d.scope),h(g),g.open().center()}),d.scope.window}function n(a){var b={};return b.scope=d.$new(),angular.extend(b.scope,a.scopeParams),delete a.scopeParams,b.url=a.url,delete a.url,b.cssClass=a.cssClass,delete a.cssClass,b.controller=a.controller,delete a.controller,b}function o(a){s=a}function p(a,b){this.kendoWindow=a,this.scope=b,this.init()}var q="srs-minimize",r={CLOSE_REASON:{CANCEL:1,COMPLETE:2},KendoWindowWrapper:p,modalInput:k,multiCenter:l,open:m,setCreateWindowFactory:o},s={create:function(b){return b=angular.extend(b||{},{visible:!1}),a("<div>").appendTo(a("body")).kendoWindow(b).data("kendoWindow")}};return p.prototype.center=function(){this.kendoWindow.center()},p.prototype.cancel=function(){this.close(r.CLOSE_REASON.CANCEL)},p.prototype.close=function(a,b){this._isRunFlags._finalizePromises||this._finalizePromises(a,b),this._isRunFlags._closeKendoWindow||this._closeKendoWindow(),this._isRunFlags._cleanup||this._cleanup()},p.prototype._closeKendoWindow=function(){this._isRunFlags._closeKendoWindow=!0,this.kendoWindow.close()},p.prototype._cleanup=function(){this._isRunFlags._cleanup=!0,this.scope.$destroy(),this.kendoWindow.element.remove(),this.kendoWindow.destroy()},p.prototype.complete=function(a){this.close(r.CLOSE_REASON.COMPLETE,a)},p.prototype._finalizePromises=function(a,b){this._isRunFlags._finalizePromises=!0,this._deferreds.whenClosed.resolve(b),a===r.CLOSE_REASON.CANCEL?this._deferreds.whenCompleted.reject():a===r.CLOSE_REASON.COMPLETE?this._deferreds.whenCompleted.resolve(b):this._deferreds.whenCompleted.reject("UNKNOWN CLOSE REASON: "+a)},p.prototype.init=function(){var a=this;a._deferreds={whenClosed:f.defer(),whenCompleted:f.defer(),whenOpened:f.defer()},a._isRunFlags={_cleanup:!1,_closeKendoWindow:!1,_finalizePromises:!1},a.kendoWindow.bind("close",function(){a._closeKendoWindow._isRun=!0,a.close(r.CLOSE_REASON.CANCEL)}),a.kendoWindow.bind("open",function(){a._deferreds.whenOpened.resolve()})},p.prototype.whenClosed=function(){return this._deferreds.whenClosed.promise},p.prototype.whenCompleted=function(){return this._deferreds.whenCompleted.promise},p.prototype.whenOpened=function(){return this._deferreds.whenOpened.promise},r}angular.module("soris.ui.components").factory("kendoWindowService",a),a.$inject=["$","$compile","$controller","$rootScope","$templateRequest","$q","$window"]}(),function(){"use strict";function a(a){function b(b,c,d){"static"===c.css("position")&&c.css("position","relative"),b.$watch(d.srsLoading,function(b){a.ui.progress(c,b)})}var c={link:b,restrict:"A"};return c}angular.module("soris.ui.components").directive("srsLoading",a),a.$inject=["kendo"]}(),function(){"use strict";angular.module("acePump.core",["kendo.directives","soris.ui.components","ngCookies"]),angular.module("acePump.core").value("kendo",kendo)}(),function(){"use strict";function a(a){a.errorOnUnhandledRejections&&a.errorOnUnhandledRejections(!1)}angular.module("acePump.core").config(a),a.$inject=["$qProvider"]}(),function(){"use strict";function a(a){function b(a){return{request:function(b){var c=a.get("webapitoken");return void 0!==c&&(b.headers=b.headers||{},b.headers.Authorization="Bearer "+c),b}}}a.interceptors.push(b),b.$inject=["$cookies"]}angular.module("acePump.core").config(a),a.$inject=["$httpProvider"]}(),function(){"use strict";angular.module("acePump.core").filter("percent",["$filter",function(a){var b=a("number");return function(a){return b(100*a)+"%"}}])}(),function(){"use strict";function a(a){function b(a){a.ok=function(){a._closeDialog(),a._broadcastModalSpecificEvent("ok")},a.cancel=function(){a._closeDialog(),a._broadcastModalSpecificEvent("cancel")},a._closeDialog=function(){a.visible=!1},a._broadcastModalSpecificEvent=function(b){var c="modalService."+b+"."+a.modalId;a.$emit(c)},a.visible=!1}function c(b,c,d,e,f){function g(){var b=c.find(".s-modal-container"),d=angular.element(a).height(),e=b.height(),f=(d-e)/2;b.css("margin-top",f)}c.find(".s-modal-content").append(f());var h="modalService.open."+b.modalId;b.$on(h,function(a,c){b.visible=!0,g()}),angular.element(a).on("resize",g),g()}var d={restrict:"E",scope:{title:"@",okText:"@",cancelText:"@",modalId:"@"},template:'<div class="s-modal-backdrop" ng-show="visible"><div class="s-modal-container" ng-show="visible"><div class="s-modal-title-bar">{{title}}</div><div class="s-modal-content"></div><div class="s-modal-buttons"><button ng-click="ok()" type="button">{{okText}}</button><button ng-click="cancel()" type="button">{{cancelText}}</button></div></div></div>',transclude:!0,link:c,controller:b};return b.$inject=["$scope"],c.$inject=["$scope","elem","attrs","controller","$transclude"],d}angular.module("acePump.core").directive("modalDialog",a),a.$inject=["$window"]}(),function(){"use strict";function a(){function a(a,b,c){var d=48;b.on("keyup",function(a){if(!(a.which<d)){var e=b.val().length,f=parseInt(c.maxlength);if(e===f){var g=$("input[type=text]"),h=g.index(a.target),i=h+1,j=$("input[type=text]:nth("+i+")");j.focus()}}})}var b={restrict:"A",link:a};return a.$inject=["$scope","elem","attrs"],b}angular.module("acePump.core").directive("autoAdvance",a)}(),function(){"use strict";function a(){function a(a,b,d,e){b.on("change",function(a){for(var f=d.maxlength,g=b.val();g.length<f;)g+=c;e.$setViewValue(g),e.$render()})}var b={restrict:"A",link:a,require:"ngModel"},c=" ";return b}angular.module("acePump.core").directive("padInput",a),a.$inject=[]}(),function(){"use strict";function a(){function a(a,b,c){b.on("focus",function(a){a.target.select()})}var b={restrict:"A",link:a};return b}angular.module("acePump.core").directive("selectOnClick",a),a.$inject=[]}(),function(){"use strict";angular.module("acePump.core").service("modalService",["$rootScope","$q",function(a,b){function c(a){this.id=a,this.init()}function d(a){return a in f||(f[a]=new c(a)),f[a]}var e={OPEN:"MODAL_DIALOG_STATE_OPEN",CLOSED:"MODAL_DIALOG_STATE_CLOSED"};c.prototype.init=function(){this._initDeferred();var a=this;this._listenForModalSpecificEvent("ok",function(){a.ok()}),this._listenForModalSpecificEvent("cancel",function(){a.cancel()}),this.state=e.CLOSED},c.prototype._initDeferred=function(){function a(c,d){var e=b.defer();e.promise["finally"](function(){a(c,d)}),c[d]=e}a(this,"_deferred")},c.prototype.then=function(a,b){this._deferred.promise.then(a,b)},c.prototype.open=function(a){this.state!==e.OPEN&&(this.state=e.OPEN,this._broadcastModalSpecificEvent("open",a))},c.prototype.close=function(){this.state=e.CLOSED,this._deferred.reject("closed"),this._broadcastModalSpecificEvent("close")},c.prototype.ok=function(){this.state=e.CLOSED,this._deferred.resolve("ok")},c.prototype.cancel=function(){this.state=e.CLOSED,this._deferred.resolve("cancel")},c.prototype._broadcastModalSpecificEvent=function(b,c){var d=this._getModalSpecificEventName(b);"undefined"==typeof c?a.$broadcast(d):a.$broadcast(d,c)},c.prototype._listenForModalSpecificEvent=function(b,c){var d=this._getModalSpecificEventName(b);a.$on(d,c)},c.prototype._getModalSpecificEventName=function(a){return"modalService."+a+"."+this.id};var f={};return{getModal:function(a){return d(a)}}}])}(),function(){"use strict";function a(){function a(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=a[c].join(""));return b}function b(a,b,c){var d,e,f;return void 0!==b&&""!==b&&30===b.length&&(d=b.length,a=b+a.substring(d,a.length)),void 0!==c&&""!==c&&72===c.length&&(e=90,d=e+c.length,f=a.substring(0,e),a=f+c+a.substring(d,a.length)),a}function c(a,c,e){a=b(a,c,e);var f=new d(a),g={},h=0;for(g.PlungerOrig=[],h=0;h<15;h++)g.PlungerOrig[h]=f.next().value;for(g.PlungerWearRepaired=[],h=0;h<15;h++)g.PlungerWearRepaired[h]=f.next().value;for(g.PlungerOut=[],h=0;h<15;h++)g.PlungerOut[h]=f.next().value;for(g.BarrelOrig=[],h=0;h<36;h++)g.BarrelOrig[h]=f.next().value;for(g.BarrelWearRepaired=[],h=0;h<36;h++)g.BarrelWearRepaired[h]=f.next().value;for(g.BarrelOut=[],h=0;h<36;h++)g.BarrelOut[h]=f.next().value;return g}function d(a){var b=0;return{next:function(){if(b<a.length){var c={value:a.substring(b,b+2)};return b+=2,c}return null}}}var e={serialize:a,deserialize:c,makeDeserializeIterator:d};return e}angular.module("acePump.core").service("plungerBarrelWearSerializationService",a)}(),function(){"use strict";function a(a,b){function c(b,c,d){return a({method:"POST",url:b,responseType:"json",data:{id:c,customerID:d}}).then(function(a){return a.data.Available})}function d(c,d){return a({method:"POST",responseType:"json",url:c,data:{model:d,useInventory:!d.ReplacedWithInventoryPartID}}).then(function(a){return a.data.Success?{replacedWithInventoryPartID:a.data.ReplacedWithInventoryPartID,availableInInventory:a.data.AvailableInInventory}:b.reject(a.data.Errors)})}function e(c,d,e){return b.when().then(function(){for(var b=[],f=0;f<e.length;f++)"Replace"!==e[f].Result&&"Convert"!==e[f].Result||(b[f]=e[f].PartReplacedID);return b.length>0?a({method:"POST",responseType:"json",url:c,data:{partTemplateIDs:b,customerId:d}}).then(function(a){return a.data}):[]})}function f(c,d,e,f){return b.when().then(function(){return a({method:"POST",responseType:"json",url:c,data:{pumpID:d,customerID:e,currentTicketDate:f}}).then(function(a){return a})})["catch"](function(a){return[]})}var g={checkAvailability:c,usePartFromInventory:d,checkAvailabilityForInspections:e,loadOriginalPartsCustomerOwned:f};return g}angular.module("acePump.core").service("inventoryService",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b){function c(c){return b.confirm(c)?a.resolve():a.reject()}var d={confirm:c};return d}angular.module("acePump.core").service("util",a),a.$inject=["$q","$window"]}(),function(){"use strict";angular.module("acePump.backOffice",["acePump.core"])}(),function(){"use strict";angular.module("acePump",["acePump.backOffice"])}(),function(){"use strict";function a(a,b,c,d){function e(a){j.serverValues=a,h()["finally"](function(){c.apiLoading=!1}),j.pumpNumber=parseInt(j.serverValues.pumpNumberFromServer)||null,j.pumpNumberInputMode=j.serverValues.pumpNumberInputMode,j.pumpNumberInputMode||(j.pumpNumberInputMode="auto",j.pumpNumberInputModeLegend="Auto Number")}function f(){j.pumpNumberInputMode="custom",j.pumpNumberInputModeLegend="Number"}function g(){c.apiLoading=!0,i()["finally"](function(){c.apiLoading=!1})}function h(){return c.apiLoading=!0,b({method:"GET",url:j.serverValues.listShopLocationsUrl,responseType:"json"}).then(function(a){if(j.shopLocations=a.data,j.serverValues.shopLocationIDFromServer)for(var b=0;b<j.shopLocations.length;b++)j.serverValues.shopLocationIDFromServer===j.shopLocations[b].ShopLocationID&&(j.selectedShop=j.shopLocations[b],b=j.shopLocations.length)})["catch"](function(a){d.alert("Was not able to find shop locations!\n")})["finally"](function(){c.apiLoading=!0})}function i(){return b({method:"GET",url:j.serverValues.getNextPumpNumberUrl,responseType:"json",params:{shopLocationId:j.selectedShop.ShopLocationID}}).then(function(a){j.pumpNumber=a.data})["catch"](function(a){d.alert("Was not able to find next pump number!\n")})}var j=this;j.init=e,j.shopLocationChange=g,j.changeInputMode=f}angular.module("acePump.backOffice").controller("PumpPrefixController",a),a.$inject=["$q","$http","$scope","$window"]}();